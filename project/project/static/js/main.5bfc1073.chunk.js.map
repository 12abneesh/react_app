{"version":3,"sources":["utils/uuid.tsx","utils/dates.tsx","service/explorer.service.tsx","components/header.component.tsx","utils/grid_helper.tsx","components/orders.component.tsx","components/positions.component.tsx","components/securities.component.tsx","components/weights.component.tsx","components/inputs.component.tsx","components/logs.component.tsx","components/info.component.tsx","components/summary.component.tsx","components/main.component.tsx","components/dataframe.component.tsx","components/group_charts.component.tsx","components/group_rebal_stats.component.tsx","components/portfolio_group.component.tsx","components/react_table_components/react_table_action.component.tsx","components/react_table_components/react_table.component.tsx","utils/Spinner.tsx","components/portfolio_list.component.tsx","views/typeahead.component.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["uuid","uuid_gen","yyyymmdd","dt","moment","format","ExplorerService","connectCallback","base_url","ws","promises","Map","this","getBaseUrl","window","location","host","indexOf","origin","hostname","groupId","rebalId","request_id","message","msg_type","group_id","rebal_id","promise","Promise","resolve","reject","set","send","JSON","stringify","requestId","smsId","sms_id","rebalDate","rebal_date","config","url","concat","body","method","ajax","pipe","map","results","response","portfolio_group_id","groupRebalRequest","dataDate","data_date","HeaderComponent","classes","props","className","grow","AppBar","position","color","Toolbar","variant","src","alt","logo","Typography","title","noWrap","Component","withStyles","theme","flexGrow","width","display","breakpoints","up","valueFormatter","col","formatter","doubleFormatter","double4dpsFormatter","doubleCommaFormatter","intCommaFormatter","cellStyle","cell_style","buySellStyle","columnFilter","dataType","createAgColumn","headerName","header_name","field","type","filter","floatingFilter","suppressSizeToFit","resizable","params","numeral","value","OrdersComponent","state","gridApi","undefined","columns","onGridReady","bind","onGridDataUpdated","onRowSelected","oldProps","orders","setState","columnApi","api","sizeColumnsToFit","event","onSecuritySelected","node","selected","data","style","height","defaultColDef","sortable","rowSelection","rowData","rows","applyColumnDefOrder","onFirstDataRendered","onRowDataUpdated","onRowDataChanged","renderEmpty","renderOrders","PositionsComponent","positions","renderPositions","SecuritiesComponent","securities","renderSecurities","WeightsComponent","weights","renderWeights","TabPanel","children","index","other","role","hidden","id","InputsComponent","tab_value","handleChange","newValue","console","log","rebal_weights","rebal_orders","root","Tabs","onChange","Tab","label","LogsComponent","rebal_logs","InfoComponent","rebal_info","push","TableRow","TableCell","Table","renderInfo","SummaryComponent","Grid","container","item","xs","MainComponent","explorer","onConnection","match","loadRebalData","resetState","rebalInfoRest","subscribe","values","rebalSecurities","then","catch","err","rebalPositions","rebalWeights","rebalOrders","rebalLogs","logs","direction","spacing","DataframeComponent","dataframe","setTimeout","allColIds","getAllColumns","colId","autoSizeColumns","onSelect","renderDataframe","backgroundColor","paddingLeft","FlexRadial","makeVisFlexible","RadialChart","GroupChartComponent","groupRebals","buyCount","sellCount","quantity","angle","showLabels","buyNotl","sellNotl","row","Math","abs","buySell","industries","industry","curr","get","total","Array","from","forEach","key","renderBuySell","renderBuySellNotional","renderIndustry","group_rebals","renderCharts","GroupRebalStatsComponent","TableBody","renderValues","PortfolioGroupComponent","onConnect","onSelectRebalDate","onSelectPortfolioRebal","onOrderSelected","onRebalSecuritySelected","getGroupPortfolios","rebal_dates","group_rebal_portfolios","group_rebal_states","group_security_orders","rebal_securities","rebal_positions","selected_portfolio","groupRebalDatesRest","next","dt_str","toDate","from_yyyymmdd","length","error","groupRebalStatsRest","portfolioGroupId","groupRebalPortfoliosRest","portfolioRebal","loadGroupRebalData","loadSingleRebalData","security","groupSecurityOrdersRest","df","order","rebal_security","rebalSecuritiesRest","rebalPositionsRest","rebalWeightsRest","rebalOrdersRest","rebalLogsRest","groupRebalsRest","renderGroup","renderPortfolio","GlobalFilter","setFilter","useState","setValue","_this","target","placeholder","ReactTable","useEffect","groupByColumns","setGroupBy","tableInstance","useTable","useGlobalFilter","useGroupBy","useExpanded","useRowSelect","hooks","visibleColumns","Header","getToggleAllRowsSelectedProps","IndeterminateCheckbox","Cell","getToggleRowSelectedProps","React","forwardRef","ref","indeterminate","rest","defaultRef","useRef","resolvedRef","current","getTableProps","getTableBodyProps","headerGroups","prepareRow","globalFilter","groupBy","expanded","setGlobalFilter","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","getRowProps","cells","cell","getCellProps","isGrouped","getToggleRowExpandedProps","isExpanded","icon","faAngleDown","faAngleRight","subRows","isAggregated","isPlaceholder","alignItems","justifyContent","CircularProgress","PortfolioList","showLoader","columnData","getPortfolioData","explorerSrvc","toString","Date","accessor","rowInfo","Number","TypeaheadComponent","onSearch","highlight","firmId","search_string","search_results","options","x","loading","minWidth","cellRenderer","display_name","toLowerCase","substr","substring","fetch","resp","json","json_res","finally","content","TextField","InputProps","endAdornment","Fragment","size","padding","ModuleRegistry","registerModules","ClientSideRowModelModule","App","path","component","TypeAheadComponent","Boolean","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.5bfc1073.chunk.js","sourcesContent":["\nimport { v4 as uuid_gen } from 'uuid';\n\nfunction uuid() : string {\n  return uuid_gen();\n}\n\nexport {\n  uuid,\n};\n","\nimport moment from 'moment';\n\n\nfunction yyyymmdd(dt: Date) : string {\n  return moment(dt).format('YYYYMMDD');\n}\n\nfunction from_yyyymmdd(dt_str: string) : Date {\n  return moment(dt_str, 'YYYYMMDD').toDate();\n}\n\nexport {\n  yyyymmdd,\n  from_yyyymmdd,\n};\n","\nimport DataFrame from '../models/dataframe';\nimport Values from '../models/values';\nimport { uuid } from '../utils/uuid';\nimport { yyyymmdd } from '../utils/dates';\nimport { Observable } from 'rxjs';\nimport { ajax, AjaxConfig, AjaxResponse} from 'rxjs/ajax';\nimport GroupRebalRequest from '../models/request_models';\nimport GroupRebalPortfoliosResponse from '../models/response_models';\nimport { map } from 'rxjs/operators';\n\ntype Nullable<T> = T | null;\n\ntype PromiseHandler = {\n  resolve: any,\n  reject: any,\n}\n\nclass ExplorerService {\n  base_url;\n  ws: Nullable<WebSocket> = null;\n  promises: Map<string, PromiseHandler> = new Map();\n  connectCallback: CallableFunction;\n\n  constructor(connectCallback: CallableFunction) {\n    this.base_url = this.getBaseUrl();\n    this.connectCallback = connectCallback;\n    /*\n    this.ws = new WebSocket('ws://127.0.0.1:9001/rebal');\n    this.ws.onerror = (error) => {\n      console.log(error);\n    };\n\n    this.ws.onopen = () => {\n      console.log('explorer: open');\n      this.connectCallback();\n    }\n\n    this.ws.onclose = () => {\n      console.log('explorer: close');\n    }\n\n    this.ws.onmessage = (message) => {\n      console.log('rebal message');\n      console.log(message);\n      const data = JSON.parse(message.data);\n      const request_id = data['request_id'];\n      const promise = this.promises.get(request_id);\n      if (promise == null) {\n        console.log('Unknown request: ' + request_id);\n        return;\n      }\n\n      switch (data.msg_type) {\n        case 'rebal_info':\n        case 'rebal_stats':\n        case 'group_rebal_dates':\n        case 'group_rebal_stats':\n          promise.resolve({ values: data.value });\n          break;\n\n        case 'rebal_securities':\n        case 'rebal_positions':\n        case 'rebal_weights':\n        case 'rebal_orders':\n        case 'rebal_logs':\n        case 'group_rebal_portfolios':\n        case 'group_rebals':\n        case 'group_security_orders':\n          const df: DataFrame = { columns: data.columns, rows: data.rows };\n          promise.resolve(df);\n          break;\n\n        default:\n          console.log('unsupported msg type: ' + data.msg_type);\n          promise.reject('');\n      }\n    }\n     */\n  }\n\n  getBaseUrl() {\n    if(window.location.host.indexOf(\"localhost\") === -1){\n      return window.location.origin;\n    } else {\n      return \"http://\" + window.location.hostname + \":8888\";\n    }\n  }\n\n  rebalInfo(groupId: string, rebalId: string): Promise<Values> {\n    const request_id = uuid();\n    const message = {\n      msg_type: 'rebal_info',\n      group_id: groupId,\n      rebal_id: rebalId,\n      request_id: request_id,\n    };\n\n    const promise = new Promise<Values>((resolve, reject) => {\n      this.promises.set(request_id, { resolve: resolve, reject: reject });\n    });\n\n    this.ws?.send(JSON.stringify(message));\n    return promise;\n  }\n\n  rebalSecurities(groupId: string, rebalId: string): Promise<DataFrame> {\n    const request_id = uuid();\n    const message = {\n      msg_type: 'rebal_securities',\n      group_id: groupId,\n      rebal_id: rebalId,\n      request_id: request_id,\n    };\n\n    const promise = new Promise<DataFrame>((resolve, reject) => {\n      this.promises.set(request_id, { resolve, reject });\n    });\n\n    this.ws?.send(JSON.stringify(message));\n    return promise;\n  }\n\n  rebalWeights(groupId: string, rebalId: string): Promise<DataFrame> {\n    const request_id = uuid();\n    const message = {\n      msg_type: 'rebal_weights',\n      group_id: groupId,\n      rebal_id: rebalId,\n      request_id: request_id,\n    };\n\n    const promise = new Promise<DataFrame>((resolve, reject) => {\n      this.promises.set(request_id, { resolve, reject });\n    });\n\n    this.ws?.send(JSON.stringify(message));\n    return promise;\n  }\n\n  rebalPositions(groupId: string, rebalId: string): Promise<DataFrame> {\n    const requestId = uuid();\n    const message = {\n      msg_type: 'rebal_positions',\n      group_id: groupId,\n      rebal_id: rebalId,\n      request_id: requestId,\n    };\n\n    const promise = new Promise<DataFrame>((resolve, reject) => {\n      this.promises.set(requestId, { resolve, reject });\n    });\n\n    this.ws?.send(JSON.stringify(message));\n    return promise;\n  }\n\n  rebalOrders(groupId: string, rebalId: string): Promise<DataFrame> {\n    const requestId = uuid();\n    const message = {\n      msg_type: 'rebal_orders',\n      group_id: groupId,\n      rebal_id: rebalId,\n      request_id: requestId,\n    };\n\n    const promise = new Promise<DataFrame>((resolve, reject) => {\n      this.promises.set(requestId, { resolve, reject });\n    });\n\n    this.ws?.send(JSON.stringify(message));\n    return promise;\n  }\n\n  rebalLogs(groupId: string, rebalId: string, smsId: string | undefined) {\n    const requestId = uuid();\n    const message = {\n      msg_type: 'rebal_logs',\n      group_id: groupId,\n      rebal_id: rebalId,\n      request_id: requestId,\n      sms_id: smsId,\n    };\n\n    const promise = new Promise<DataFrame>((resolve, reject) => {\n      this.promises.set(requestId, { resolve, reject });\n    });\n\n    this.ws?.send(JSON.stringify(message));\n    return promise;\n  }\n\n  groupRebalDates(groupId: string): Promise<Values> {\n    const request_id = uuid();\n    const message = {\n      msg_type: 'group_rebal_dates',\n      group_id: groupId,\n      request_id: request_id,\n    };\n\n    const promise = new Promise<Values>((resolve, reject) => {\n      this.promises.set(request_id, { resolve, reject });\n    });\n\n    this.ws?.send(JSON.stringify(message));\n    return promise;\n  }\n\n  groupRebalStats(groupId: string, rebalDate: Date): Promise<Values> {\n    const request_id = uuid();\n    const message = {\n      msg_type: 'group_rebal_stats',\n      group_id: groupId,\n      request_id: request_id,\n      rebal_date: yyyymmdd(rebalDate),\n    };\n\n    const promise = new Promise<Values>((resolve, reject) => {\n      this.promises.set(request_id, { resolve, reject });\n    });\n\n    this.ws?.send(JSON.stringify(message));\n    return promise;\n  }\n\n  groupRebalPortfolios(groupId: string, rebalDate: Date) {\n    const request_id = uuid();\n    const message = {\n      msg_type: 'group_rebal_portfolios',\n      request_id: request_id,\n      group_id: groupId,\n      rebal_date: yyyymmdd(rebalDate),\n    };\n\n    const promise = new Promise<DataFrame>((resolve, reject) => {\n      this.promises.set(request_id, { resolve, reject });\n    });\n\n    this.ws?.send(JSON.stringify(message));\n    return promise;\n  }\n\n  groupRebals(groupId: string, rebalDate: Date): Promise<DataFrame> {\n    const request_id = uuid();\n    const message = {\n      msg_type: 'group_rebals',\n      request_id: request_id,\n      group_id: groupId,\n      rebal_date: yyyymmdd(rebalDate),\n    };\n\n    const promise = new Promise<DataFrame>((resolve, reject) => {\n      this.promises.set(request_id, { resolve, reject });\n    });\n\n    this.ws?.send(JSON.stringify(message));\n    return promise;\n  }\n\n  groupSecurityOrders(groupId: string, smsId: string, rebalDate: Date): Promise<DataFrame> {\n    const requestId = uuid();\n    const message = {\n      msg_type: 'group_security_orders',\n      request_id: requestId,\n      group_id: groupId,\n      sms_id: smsId,\n      rebal_date: yyyymmdd(rebalDate),\n    };\n\n    const promise = new Promise<DataFrame>((resolve, reject) => {\n      this.promises.set(requestId, { resolve, reject });\n    });\n\n    this.ws?.send(JSON.stringify(message));\n    return promise;\n  }\n\n  /**\n   * REST calls integration starts\n   */\n\n  rebalInfoRest(groupId: string, rebalId: string): Observable<Values> {\n    const config: AjaxConfig = {\n      url: this.base_url.concat('/rebal_info'),\n      body: {\n        group_id: groupId,\n        rebal_id: rebalId,\n      },\n      method: 'POST',\n    };\n\n    return ajax(config)\n      .pipe(map((results: AjaxResponse<any>) => JSON.stringify(results.response)));\n  }\n\n  rebalSecuritiesRest(groupId: string, rebalId: string): Observable<DataFrame> {\n    const config: AjaxConfig = {\n      url: this.base_url.concat('/rebal_securities'),\n      body: {\n        group_id: groupId,\n        rebal_id: rebalId,\n      },\n      method: 'POST',\n    };\n\n    return ajax(config)\n      .pipe(map((results: AjaxResponse<any>) => JSON.stringify(results.response)));\n  }\n\n  rebalWeightsRest(groupId: string, rebalId: string): Observable<any> {\n    const config: AjaxConfig = {\n      url: this.base_url.concat('/rebal_weights'),\n      body: {\n        group_id: groupId,\n        rebal_id: rebalId,\n      },\n      method: 'POST',\n    };\n\n    return ajax(config)\n      .pipe(map((results: AjaxResponse<any>) => results.response));\n  }\n\n  rebalPositionsRest(groupId: string, rebalId: string): Observable<any> {\n    const config: AjaxConfig = {\n      url: this.base_url.concat('/rebal_positions'),\n      body: {\n        group_id: groupId,\n        rebal_id: rebalId,\n      },\n      method: 'POST',\n    };\n\n    return ajax(config)\n      .pipe(map((results: AjaxResponse<any>) => results.response));\n  }\n\n  rebalOrdersRest(groupId: string, rebalId: string): Observable<any> {\n    const config: AjaxConfig = {\n      url: this.base_url.concat('/rebal_orders'),\n      body: {\n        group_id: groupId,\n        rebal_id: rebalId,\n      },\n      method: 'POST',\n    };\n\n    return ajax(config)\n      .pipe(map((results: AjaxResponse<any>) => results.response));\n  }\n\n  rebalLogsRest(groupId: string, rebalId: string, smsId: string | undefined): Observable<any> {\n    const config: AjaxConfig = {\n      url: this.base_url.concat('/rebal_logs'),\n      body: {\n        group_id: groupId,\n        rebal_id: rebalId,\n        sms_id: smsId,\n      },\n      method: 'POST',\n    };\n\n    return ajax(config)\n      .pipe(map((results: AjaxResponse<any>) => results.response));\n  }\n\n  groupRebalDatesRest(groupId: string): Observable<any> {\n    const config: AjaxConfig = {\n      url: this.base_url.concat('/group_rebal_dates'),\n      body: {\n        portfolio_group_id: groupId,\n      },\n      method: 'POST',\n    };\n\n    return ajax(config)\n      .pipe(map((results: AjaxResponse<any>) => results.response));\n  }\n\n  groupRebalStatsRest(groupId: string, rebalDate: Date): Observable<Values> {\n    const config: AjaxConfig = {\n      url: this.base_url.concat('/group_rebal_stats'),\n      body: {\n        portfolio_group_id: groupId,\n        rebal_date: yyyymmdd(rebalDate),\n      },\n      method: 'POST',\n    };\n\n    return ajax(config)\n      .pipe(map((results: AjaxResponse<Values>) => results.response));\n  }\n\n  groupRebalPortfoliosRest(groupId: string, rebalDate: Date): Observable<any> {\n    const config: AjaxConfig = {\n      url: this.base_url.concat('/group_rebal_portfolios'),\n      body: {\n        portfolio_group_id: groupId,\n        rebal_date: yyyymmdd(rebalDate),\n      },\n      method: 'POST',\n    };\n\n    return ajax(config)\n      .pipe(map((results: AjaxResponse<any>) => results.response));\n  }\n\n  groupRebalsRest(groupId: string, rebalDate: Date): Observable<DataFrame> {\n    const config: AjaxConfig = {\n      url: this.base_url.concat('/group_rebals'),\n      body: {\n        portfolio_group_id: groupId,\n        rebal_date: yyyymmdd(rebalDate),\n      },\n      method: 'POST',\n    };\n\n    return ajax(config)\n      .pipe(map((results: AjaxResponse<DataFrame>) => results.response));\n  }\n\n  groupSecurityOrdersRest(groupId: string, smsId: string, dataDate: Date): Observable<DataFrame> {\n    const config: AjaxConfig = {\n      url: this.base_url.concat('/group_security_orders'),\n      body: {\n        portfolio_group_id: groupId,\n        sms_id: smsId,\n        data_date: yyyymmdd(dataDate),\n      },\n      method: 'POST',\n    };\n\n    return ajax(config)\n      .pipe(map((results: AjaxResponse<DataFrame>) => results.response));\n  }\n\n  /**\n   * @description This is used to get portfolio List on rebal date and group id\n   * @param groupRebalRequest\n   */\n  groupRebalPortfoliosRest(groupRebalRequest: GroupRebalRequest): Observable<GroupRebalPortfoliosResponse> {\n    const config: AjaxConfig = {\n      url: this.base_url.concat('/group_rebal_portfolios'),\n      body: groupRebalRequest,\n      method: 'POST',\n    };\n\n    return ajax(config)\n      .pipe(map((results: AjaxResponse<GroupRebalPortfoliosResponse>) => results.response));\n  }\n  /**\n   * REST calls integration ends\n   */\n}\n\nexport default ExplorerService;\n","\nimport React, { Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n\n// TODO this will be updated as part of ticket 241/253\nconst styles = (theme: Theme) => ({\n  grow: {\n    flexGrow: 1,\n  },\n  logo: {\n    width: '3rem'\n  },\n  title: {\n    color: 'white',\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block',\n    },\n  },\n});\n\nexport interface HeaderProps {\n  classes: any,\n  title: string\n}\n\ninterface HeaderState {\n\n}\n\nclass HeaderComponent extends Component<HeaderProps, HeaderState> {\n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={classes.grow}>\n        <AppBar position=\"static\" color=\"primary\">\n          <Toolbar variant=\"dense\">\n            <img src={\"/assets/addepar_logo.png\"} alt=\"Addepar\" className={classes.logo} />\n            <Typography className={classes.title} variant=\"h6\" noWrap>\n              {this.props.title}\n            </Typography>\n            <div className={classes.grow} />\n          </Toolbar>\n        </AppBar>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(HeaderComponent);\n","\nimport React from 'react';\nimport { AgGridColumn } from '@ag-grid-community/react';\nimport numeral from 'numeral';\n\nimport Column from '../models/column';\n\n\nfunction valueFormatter(col: Column) {\n  if (col.formatter === 'double') {\n    return doubleFormatter;\n  } else if (col.formatter === 'double_4dps') {\n    return double4dpsFormatter;\n  } else if (col.formatter === 'double_comma') {\n    return doubleCommaFormatter;\n  } else if (col.formatter === 'int_comma') {\n    return intCommaFormatter;\n  } else {\n    return undefined;\n  }\n}\n\nfunction cellStyle(col: Column) {\n  if (col.cell_style === 'buy_sell') {\n    return buySellStyle;\n  } else {\n    return undefined;\n  }\n}\n\nfunction columnFilter(col: Column) {\n    if (col.dataType === 'double') {\n        return 'agNumberColumnFilter';\n    } else if (col.dataType === 'string') {\n        return 'agTextColumnFilter';\n    } else {\n        return true;\n    }\n}\n\nfunction createAgColumn(col: Column) {\n    return <AgGridColumn\n      headerName={ col.header_name }\n      field={ col.field }\n      key={ col.field }\n      type={ col.type }\n      valueFormatter={ valueFormatter(col) }\n      cellStyle={ cellStyle(col) }\n      filter={ columnFilter(col) }\n      floatingFilter={ true }\n      suppressSizeToFit={ false }\n      resizable={ true }\n    />;\n}\n\nfunction doubleFormatter(params: any) {\n  return numeral(params.value).format('0.00');\n}\n\nfunction double4dpsFormatter(params: any) {\n  return numeral(params.value).format('0.0000');\n}\n\nfunction doubleCommaFormatter(params: any) {\n  return numeral(params.value).format('0,0.00');\n}\n\nfunction intCommaFormatter(params: any) {\n  return numeral(params.value).format('0,0');\n}\n\nfunction buySellStyle(params: any) {\n  if (params.value < 0) {\n    return {color: 'red'};\n  } else {\n    return {color: 'green'};\n  }\n}\n\n// export default doubleFormatter;\nexport {\n    doubleFormatter,\n    doubleCommaFormatter,\n    intCommaFormatter,\n    createAgColumn,\n};\n","\nimport React, {Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\nimport { AgGridColumn, AgGridReact } from '@ag-grid-community/react';\n\nimport Column from '../models/column';\nimport DataFrame from '../models/dataframe';\nimport { createAgColumn } from '../utils/grid_helper';\n\n\nconst styles = (theme: Theme) => ({\n});\n\ninterface OrdersProps {\n  classes: any,\n  orders: DataFrame | undefined,\n  onSecuritySelected: CallableFunction,\n}\n\ninterface OrdersState {\n  gridApi: any,\n  columns: AgGridColumn[] | undefined,\n}\n\nclass OrdersComponent extends Component<OrdersProps, OrdersState> {\n  constructor(props: OrdersProps) {\n    super(props);\n    this.state = {\n      gridApi: undefined,\n      columns: undefined,\n    };\n    this.onGridReady = this.onGridReady.bind(this);\n    this.onGridDataUpdated = this.onGridDataUpdated.bind(this);\n    this.onRowSelected = this.onRowSelected.bind(this);\n  }\n\n  componentDidUpdate(oldProps: OrdersProps) {\n    if (this.props.orders !== oldProps.orders) {\n      if (this.props.orders === undefined) {\n        this.setState({columns: undefined});\n      } else {\n        this.setState({columns: this.props.orders.columns.map((col: Column) => createAgColumn(col))});\n      }\n    }\n  }\n\n  onGridReady(params: any) {\n    this.setState({ gridApi: params.columnApi });\n  }\n\n  onGridDataUpdated(params: any) {\n    params.api.sizeColumnsToFit();\n  }\n\n  onRowSelected(event: any) {\n    if (this.props.onSecuritySelected !== undefined) {\n      if (event.node.selected === false) {\n        this.props.onSecuritySelected(undefined);\n      } else {\n        this.props.onSecuritySelected(event.data['sms_id']);\n      }\n    }\n  }\n\n  renderEmpty() {\n    return (<div></div>); \n  }\n\n  renderOrders(orders: DataFrame) {\n    const { columns } = this.state;\n    return (\n      <div className=\"ag-theme-fresh\" style={{ height: '100%', width: '100%' }}>\n        <AgGridReact\n          defaultColDef={{\n            resizable: true,\n            filter: true,\n            sortable: true,\n          }}\n          rowSelection={'single'}\n          rowData={orders.rows}\n          applyColumnDefOrder={true}\n          onGridReady={ this.onGridReady }\n          onFirstDataRendered={ this.onGridDataUpdated }\n          onRowDataUpdated={ this.onGridDataUpdated }\n          onRowDataChanged={ this.onGridDataUpdated }\n          onRowSelected={ this.onRowSelected }\n          >\n          {columns}  \n        </AgGridReact>\n      </div>\n    );\n  }\n\n  render() {\n    const { orders } = this.props;\n\n    if (orders === undefined) {\n      return this.renderEmpty();\n    } else {\n      return this.renderOrders(orders);\n    }\n  }\n}\n\nexport default withStyles(styles)(OrdersComponent);\n","\nimport React, {Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\nimport { AgGridColumn, AgGridReact } from '@ag-grid-community/react';\n\nimport Column from '../models/column';\nimport DataFrame from '../models/dataframe';\nimport { createAgColumn } from '../utils/grid_helper';\n\n\nconst styles = (theme: Theme) => ({\n\n});\n\ninterface PositionsProps {\n  classes: any,\n  positions: DataFrame | undefined,\n}\n\ninterface PositionsState {\n  gridApi: any,\n  columns: AgGridColumn[] | undefined,\n}\n\nclass PositionsComponent extends Component<PositionsProps, PositionsState> {\n  constructor(props: PositionsProps) {\n    super(props);\n    this.state = {\n      gridApi: undefined,\n      columns: undefined,\n    };\n    this.onGridReady = this.onGridReady.bind(this);\n    this.onGridDataUpdated = this.onGridDataUpdated.bind(this);\n    this.onRowSelected = this.onRowSelected.bind(this);\n  }\n\n  componentDidUpdate(oldProps: PositionsProps) {\n    if (this.props.positions !== oldProps.positions) {\n      if (this.props.positions === undefined) {\n        this.setState(() => ({ columns: undefined }));\n      } else {\n        this.setState(() => ({ columns: this.props.positions.columns.map((col: Column) => createAgColumn(col)) }));\n      }\n    }\n  }\n\n  onGridReady(params: any) {\n    this.setState(() => ({ gridApi: params.columnApi }));\n  }\n\n  onGridDataUpdated(params: any) {\n    params.api.sizeColumnsToFit();\n  }\n\n  onRowSelected(event: any) {\n    if (event.node.selected === false) {\n      // todo handle unselect\n    } else {\n      // todo\n    }\n  }\n\n  renderEmpty() {\n    return (<div>No securities data</div>);\n  }\n\n  renderPositions(positions: DataFrame) {\n    const { columns } = this.state;\n    return (\n      <div className=\"ag-theme-fresh\" style={{ height: '100%', width: '100%' }}>\n        <AgGridReact\n          defaultColDef={{\n            resizable: true,\n            filter: true,\n            sortable: true,\n          }}\n          rowSelection={'single'}\n          rowData={positions.rows}\n          applyColumnDefOrder={true}\n          onGridReady={ this.onGridReady }\n          onFirstDataRendered={ this.onGridDataUpdated }\n          onRowDataUpdated={ this.onGridDataUpdated }\n          onRowDataChanged={ this.onGridDataUpdated }\n          onRowSelected={ this.onRowSelected }\n          >\n          {columns}  \n        </AgGridReact>\n      </div>\n    );\n  }\n\n  render() {\n    const { positions } = this.props;\n\n    if (positions === undefined) {\n      return this.renderEmpty();\n    } else {\n      return this.renderPositions(positions);  \n    }\n  }\n}\n\nexport default withStyles(styles)(PositionsComponent);\n","\nimport React, {Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\nimport { AgGridColumn, AgGridReact } from '@ag-grid-community/react';\n\nimport Column from '../models/column';\nimport DataFrame from '../models/dataframe';\nimport { createAgColumn } from '../utils/grid_helper';\n\n\nconst styles = (theme: Theme) => ({\n\n});\n\ninterface SecuritiesProps {\n  classes: any,\n  securities: DataFrame | undefined,\n}\n\ninterface SecuritiesState {\n  gridApi: any,\n  columns: AgGridColumn[] | undefined,\n}\n\nclass SecuritiesComponent extends Component<SecuritiesProps, SecuritiesState> {\n  constructor(props: SecuritiesProps) {\n    super(props);\n    this.state = {\n      gridApi: undefined,\n      columns: undefined,\n    };\n    this.onGridReady = this.onGridReady.bind(this);\n    this.onGridDataUpdated = this.onGridDataUpdated.bind(this);\n    this.onRowSelected = this.onRowSelected.bind(this);\n  }\n\n  componentDidUpdate(oldProps: SecuritiesProps) {\n    if (this.props.securities !== oldProps.securities) {\n      if (this.props.securities === undefined) {\n        this.setState(() => ({ columns: undefined }));\n      } else {\n        this.setState(() => ({ columns: this.props.securities.columns.map((col: Column) => createAgColumn(col)) }));\n      }\n    }\n  }\n\n  onGridReady(params: any) {\n    this.setState(() => ({ gridApi: params.columnApi }));\n  }\n\n  onGridDataUpdated(params: any) {\n    params.api.sizeColumnsToFit();\n  }\n\n  onRowSelected(event: any) {\n    if (event.node.selected === false) {\n      // todo handle unselect\n    } else {\n      // todo\n    }\n  }\n\n  renderEmpty() {\n    return (<div>No securities data</div>);\n  }\n\n  renderSecurities(securities: DataFrame) {\n    const { columns } = this.state;\n    return (\n      <div className=\"ag-theme-fresh\" style={{ height: '100%', width: '100%' }}>\n        <AgGridReact\n          defaultColDef={{\n            resizable: true,\n            filter: true,\n            sortable: true,\n          }}\n          rowSelection={'single'}\n          rowData={securities.rows}\n          applyColumnDefOrder={true}\n          onGridReady={ this.onGridReady }\n          onFirstDataRendered={ this.onGridDataUpdated }\n          onRowDataUpdated={ this.onGridDataUpdated }\n          onRowDataChanged={ this.onGridDataUpdated }\n          onRowSelected={ this.onRowSelected }\n          >\n          {columns}  \n        </AgGridReact>\n      </div>\n    );\n  }\n\n  render() {\n    const { securities } = this.props;\n\n    if (securities === undefined) {\n      return this.renderEmpty();\n    } else {\n      return this.renderSecurities(securities);  \n    }\n  }\n}\n\nexport default withStyles(styles)(SecuritiesComponent);\n","\nimport React, {Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\nimport { AgGridColumn, AgGridReact } from '@ag-grid-community/react';\n\nimport Column from '../models/column';\nimport DataFrame from '../models/dataframe';\nimport { createAgColumn } from '../utils/grid_helper';\n\n\nconst styles = (theme: Theme) => ({\n\n});\n\ninterface WeightsProps {\n  classes: any,\n  weights: DataFrame | undefined,\n  onSecuritySelected: CallableFunction,\n}\n\ninterface WeightsState {\n  gridApi: any,\n  columns: AgGridColumn[] | undefined,\n}\n\nclass WeightsComponent extends Component<WeightsProps, WeightsState> {\n  constructor(props: WeightsProps) {\n    super(props);\n    this.state = {\n      gridApi: undefined,\n      columns: undefined,\n    };\n    this.onGridReady = this.onGridReady.bind(this);\n    this.onGridDataUpdated = this.onGridDataUpdated.bind(this);\n    this.onRowSelected = this.onRowSelected.bind(this);\n  }\n\n  componentDidUpdate(oldProps: WeightsProps) {\n    if (this.props.weights !== oldProps.weights) {\n      if (this.props.weights === undefined) {\n        this.setState({columns: undefined});\n      } else {\n        this.setState({columns: this.props.weights.columns.map((col: Column) => createAgColumn(col))});\n      }\n    }\n  }\n\n  onGridReady(params: any) {\n    this.setState(() => ({ gridApi: params.columnApi }));\n  }\n\n  onGridDataUpdated(params: any) {\n    params.api.sizeColumnsToFit();\n  }\n\n  onRowSelected(event: any) {\n    if (event.node.selected === false) {\n      this.props.onSecuritySelected(undefined);      \n    } else {\n      if (this.props.onSecuritySelected !== undefined) {\n        this.props.onSecuritySelected(event.data['sms_id']);\n      }\n    }\n  }\n\n  renderEmpty() {\n    return (<div></div>);\n  }\n\n  renderWeights(weights: DataFrame) {\n    const { columns } = this.state;\n    return (\n      <div className=\"ag-theme-fresh\" style={{ height: '100%', width: '100%' }}>\n        <AgGridReact\n          defaultColDef={{\n            resizable: true,\n            filter: true,\n            sortable: true,\n          }}\n          rowSelection={'single'}\n          rowData={weights.rows}\n          applyColumnDefOrder={true}\n          onGridReady={ this.onGridReady }\n          onFirstDataRendered={ this.onGridDataUpdated }\n          onRowDataUpdated={ this.onGridDataUpdated }\n          onRowDataChanged={ this.onGridDataUpdated }\n          onRowSelected={ this.onRowSelected }\n          >\n          {columns}  \n        </AgGridReact>\n      </div>\n    );\n  }\n\n  render() {\n    const { weights } = this.props;\n\n    if (weights === undefined) {\n      return this.renderEmpty();\n    } else {\n      return this.renderWeights(weights);  \n    }\n  }\n}\n\nexport default withStyles(styles)(WeightsComponent);\n","\nimport React, {Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Box from '@material-ui/core/Box';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\n\nimport DataFrame from '../models/dataframe';\nimport OrdersComponent from './orders.component';\nimport PositionsComponent from './positions.component';\nimport SecuritiesComponent from './securities.component';\nimport WeightsComponent from './weights.component';\nimport { classes } from 'istanbul-lib-coverage';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: any;\n  value: any;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      style={{ height: '100%'}}\n      {...other}\n    >\n      {children}\n    </div>\n  );\n}\n\nconst styles = (theme: Theme) => ({\n  root: {\n    flexGrow: 1,\n    height: '100%',\n  },\n});\n\ninterface InputsProps {\n  classes: any,\n  securities: DataFrame | undefined,\n  positions: DataFrame | undefined,\n  rebal_weights: DataFrame | undefined,\n  rebal_orders: DataFrame | undefined,\n\n  onSecuritySelected: CallableFunction,\n}\n\ninterface InputsState {\n  tab_value: any,\n}\n\nfunction a11yProps(index: any) {\n  return {\n    id: `simple-tab-${index}`,\n    'aria-controls': `simple-tabpanel-${index}`,\n  };\n}\n\nclass InputsComponent extends Component<InputsProps, InputsState> {\n  constructor(props: InputsProps) {\n    super(props);\n    this.state = {\n      tab_value: 0,\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event: any, newValue: number) {\n    console.log('tab change - ' + newValue);\n    this.setState({ tab_value: newValue });\n  }\n\n  render() {\n    const { classes, securities, positions, rebal_weights, rebal_orders } = this.props;\n    const { tab_value } = this.state;\n\n    return (\n      <div className={classes.root}>\n        <AppBar position='static'>\n          <Tabs value={tab_value} onChange={this.handleChange}>\n            <Tab label='Securities' />\n            <Tab label='Positions' />\n            <Tab label='Weights' />\n            <Tab label='Orders' />\n          </Tabs>\n        </AppBar>\n        <TabPanel value={tab_value} index={0}>\n          <SecuritiesComponent securities={securities} />\n        </TabPanel>\n        <TabPanel value={tab_value} index={1}>\n          <PositionsComponent positions={positions} />\n        </TabPanel>\n        <TabPanel value={tab_value} index={2}>\n          <WeightsComponent weights={rebal_weights} onSecuritySelected={ this.props.onSecuritySelected } />\n        </TabPanel>\n        <TabPanel value={tab_value} index={3}>\n          <OrdersComponent orders={rebal_orders} onSecuritySelected={ this.props.onSecuritySelected } />\n        </TabPanel>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(InputsComponent);\n","\nimport React, { Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\nimport { AgGridReact } from '@ag-grid-community/react';\n\nimport Column from '../models/column';\nimport DataFrame from '../models/dataframe';\nimport { createAgColumn } from '../utils/grid_helper';\n\n\nconst styles = (theme: Theme) => ({\n\n});\n\ninterface LogsProps {\n  classes: any,\n  rebal_logs: any,\n}\n\ninterface LogsState {\n  gridApi: any,\n  columns: Column[] | undefined,\n}\n\nclass LogsComponent extends Component<LogsProps, LogsState> {\n  constructor(props: LogsProps) {\n    super(props);\n    this.state = {\n      gridApi: undefined,\n      columns: undefined,\n    };\n    this.onGridReady = this.onGridReady.bind(this);\n    this.onGridDataUpdated = this.onGridDataUpdated.bind(this);\n  }\n\n  componentDidUpdate(oldProps: LogsProps) {\n    if (this.props.rebal_logs !== oldProps.rebal_logs) {\n      if (this.props.rebal_logs === undefined) {\n        this.setState(() => ({ columns: undefined }));\n      } else {\n        this.setState(() => ({ columns: this.props.rebal_logs.columns.map((col: Column) => createAgColumn(col)) }));\n      }\n    }\n  }\n\n  onGridReady(params: any) {\n    this.setState(() => ({ gridApi: params.columnApi }));\n  }\n\n  onGridDataUpdated(params: any) {\n    params.api.sizeColumnsToFit();\n  }\n\n  renderEmpty() {\n    return (<div></div>);\n  }\n\n  renderWeights(weights: DataFrame) {\n    const { columns } = this.state;\n    return (\n      <div className=\"ag-theme-fresh\" style={{ height: '100%', width: '100%' }}>\n        <AgGridReact\n          defaultColDef={{\n            resizable: true,\n            filter: true,\n            sortable: true,\n          }}\n          rowData={weights.rows}\n          applyColumnDefOrder={true}\n          onGridReady={ this.onGridReady }\n          onFirstDataRendered={ this.onGridDataUpdated }\n          onRowDataUpdated={ this.onGridDataUpdated }\n          onRowDataChanged={ this.onGridDataUpdated }\n          >\n          {columns}  \n        </AgGridReact>\n      </div>\n    );\n  }\n\n  render() {\n    const { rebal_logs } = this.props;\n\n    if (rebal_logs === undefined) {\n      return this.renderEmpty();\n    } else {\n      return this.renderWeights(rebal_logs);  \n    }\n  }\n}\n\nexport default withStyles(styles)(LogsComponent);\n","\nimport React, { Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\n\nconst styles = (theme: Theme) => ({\n\n});\n\ninterface InfoProps {\n  classes: any,\n  rebal_info: any,\n}\n\ninterface InfoState {\n\n}\n\nclass InfoComponent extends Component<InfoProps, InfoState> {\n  renderEmpty() {\n    return <div></div>\n  }\n\n  renderInfo(rebal_info: any) {\n    const fields = ['rebal_id', 'rebal_date', 'asset_class', 'positions', 'nav', \n      'prev_rebal_date', 'prev_positions', 'prev_nav', 'drift',\n    ];\n    let rows = [];\n    for (const field of fields) {\n      const value = rebal_info[field];\n      if (value === null || value === undefined) {\n        continue;\n      }\n\n      rows.push(\n        <TableRow key={field}>\n          <TableCell>{field}</TableCell>\n          <TableCell>{value}</TableCell>\n        </TableRow>\n      );\n    }\n\n    return (\n      <div>\n        <Table>\n          { rows }\n        </Table>\n      </div>\n    )\n  }\n\n  render() {\n    const { classes, rebal_info } = this.props;\n    if (rebal_info === undefined) {\n      return this.renderEmpty();\n    } else {\n      return this.renderInfo(rebal_info);\n    }\n  }\n}\n\nexport default withStyles(styles)(InfoComponent);\n","\nimport React, { Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\n\nimport InfoComponent from './info.component';\n\n\nconst styles = (theme: Theme) => ({\n\n});\n\ninterface SummaryProps {\n  classes: any,\n  rebal_info: any,\n}\n\ninterface SummaryState {\n\n}\n\nclass SummaryComponent extends Component<SummaryProps, SummaryState> {\n  render() {\n    const { classes, rebal_info } = this.props;\n\n    return (\n      <Grid container>\n        <Grid item xs={4}>\n          <InfoComponent rebal_info={rebal_info} />\n        </Grid>\n      </Grid>            \n    );\n  }\n}\n\nexport default withStyles(styles)(SummaryComponent);\n","\nimport React, { Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\n\nimport DataFrame from '../models/dataframe';\nimport ExplorerService from '../service/explorer.service';\nimport HeaderComponent from './header.component';\nimport InputsComponent from './inputs.component';\nimport LogsComponent from './logs.component';\nimport SummaryComponent from './summary.component';\n\n\nconst styles = (theme: Theme) => ({\n  root: {\n    flexGrow: 1,\n    height: '100%',\n  },\n  grow: {\n    flexGrow: 1,\n  },\n});\n\ninterface MainProps {\n  classes: any,\n  match: any,\n}\n\ninterface MainState {\n  groupId: string,\n  rebalId: string,\n  explorer: ExplorerService | undefined,\n\n  rebal_info: any,\n  securities: DataFrame | undefined,\n  positions: DataFrame | undefined,\n  rebal_weights: DataFrame | undefined,\n  rebal_orders: DataFrame | undefined,\n  rebal_logs: DataFrame | undefined,\n}\n\ntype Nullable<T> = T | null;\n\nclass MainComponent extends Component<MainProps, MainState> {\n  ws: Nullable<WebSocket> = null;\n\n  constructor(props: MainProps) {\n    super(props);\n    this.state = {\n      groupId: '',\n      rebalId: '',\n      explorer: undefined,\n      rebal_info: undefined,\n      securities: undefined,\n      positions: undefined,\n      rebal_weights: undefined,\n      rebal_orders: undefined,\n      rebal_logs: undefined,\n    }\n    this.onConnection = this.onConnection.bind(this);\n    this.onSecuritySelected = this.onSecuritySelected.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(this.props);\n    this.setState({rebalId: this.props.match.rebalId})\n\n    if (this.state.explorer === undefined) {\n      const explorer = new ExplorerService(this.onConnection);\n      this.setState({'explorer': explorer});\n    }\n\n    this.onConnection();\n  }\n\n  onConnection() {\n    console.log('onConnection()');\n    const rebalId = this.props.match.params.rebalId;\n    this.loadRebalData(rebalId);\n  }\n\n  loadRebalData(rebalId: string) {\n    // reset current state\n    this.resetState();\n\n    // load new state\n    const { groupId } = this.state;\n    const explorer = this.state.explorer!!;\n    explorer.rebalInfoRest(groupId, rebalId)\n      .subscribe(values => {\n        this.setState(() => ({rebal_info: values}));\n        console.log('rebal_info');\n        console.log(values);\n      });\n\n    explorer?.rebalSecurities(groupId, rebalId)\n      .then((securities) => this.setState({securities: securities}))\n      .catch((err) => console.log(err));\n\n    explorer?.rebalPositions(groupId, rebalId)\n      .then((positions) => this.setState({positions: positions}))\n      .catch((err) => console.log(err));\n\n    explorer?.rebalWeights(groupId, rebalId)\n      .then((weights) => this.setState({rebal_weights: weights}))  \n      .catch((err) => console.log(err));\n\n    explorer?.rebalOrders(groupId, rebalId)\n      .then((orders) => this.setState({rebal_orders: orders}))  \n      .catch((err) => console.log(err));\n\n    explorer?.rebalLogs(groupId, rebalId, undefined)\n      .then((logs) => this.setState({rebal_logs: logs}))  \n      .catch((err) => console.log(err));\n  }\n\n  resetState() {\n    this.setState({\n      rebal_info: undefined,\n      securities: undefined,\n      positions: undefined,\n      rebal_weights: undefined,\n      rebal_orders: undefined,\n      rebal_logs: undefined,\n    });\n  }\n\n  onSecuritySelected(sms_id: string | undefined) {\n    const { groupId, rebalId, explorer } = this.state;\n    explorer?.rebalLogs(groupId, rebalId, sms_id)\n      .then((logs) => this.setState({rebal_logs: logs}))\n      .catch((err) => console.log(err));\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { rebal_info, securities, positions, rebal_weights, rebal_orders, rebal_logs } = this.state;\n\n    return (\n      <div className={classes.root}>\n        <HeaderComponent title='Rebal POC'/>\n\n        <Grid container className={classes.root} direction='row' spacing={0}>\n          <Grid container style={{ height: '50%' }}>\n            <SummaryComponent rebal_info={ rebal_info } />\n          </Grid>\n          <Grid container style={{ height: '50%' }}>\n            <Grid item xs={6}>\n              <InputsComponent\n                securities={securities}\n                positions={positions}\n                rebal_weights={rebal_weights}\n                rebal_orders={rebal_orders}\n                onSecuritySelected={this.onSecuritySelected} \n              />\n            </Grid>\n            <Grid item xs={6}>\n              <LogsComponent rebal_logs={rebal_logs} />\n            </Grid>\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(MainComponent);\n","\nimport React, {Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\nimport { AgGridColumn, AgGridReact } from '@ag-grid-community/react';\nimport { AppBar, Toolbar, Typography } from \"@material-ui/core\";\n\nimport Column from '../models/column';\nimport DataFrame from '../models/dataframe';\nimport { createAgColumn } from '../utils/grid_helper';\n\n\nconst styles = (theme: Theme) => ({\n  title: {\n    backgroundColor: '#4466ff',\n    color: '#ffffff',\n    paddingLeft: 10,\n  },\n});\n\ninterface DataframeProps {\n  classes: any,\n  title: string,\n  dataframe: DataFrame,\n  onSelect: CallableFunction | undefined,\n}\n\ninterface DataframeState {\n  gridApi: any,\n  columns: AgGridColumn[] | undefined,\n}\n\nclass DataframeComponent extends Component<DataframeProps, DataframeState> {\n  constructor(props: DataframeProps) {\n    super(props);\n    this.state = {\n      gridApi: undefined,\n      columns: undefined,\n    };\n\n    this.onGridReady = this.onGridReady.bind(this);\n    this.onGridDataUpdated = this.onGridDataUpdated.bind(this);\n    this.onRowSelected = this.onRowSelected.bind(this);\n  }\n\n  componentDidUpdate(oldProps: DataframeProps) {\n    if (this.props.dataframe !== oldProps.dataframe) {\n      if (this.props.dataframe === undefined) {\n        this.setState({columns: undefined});\n      } else {\n        this.setState({columns: this.props.dataframe.columns.map((col: Column) => createAgColumn(col))});\n      }\n    }\n  }\n\n  onGridReady(params: any) {\n    this.setState({ gridApi: params.columnApi });\n  }\n\n  onGridDataUpdated(params: any) {\n    setTimeout(() => {\n      var allColIds = params.columnApi.getAllColumns().map((col: any) => col.colId);\n      params.columnApi.autoSizeColumns(allColIds);\n    }, 100);\n  }\n\n  onRowSelected(event: any) {\n    if (this.props.onSelect !== undefined) {\n      if (event.node.selected == false) {\n        this.props.onSelect(undefined);\n      } else {\n        this.props.onSelect(event.data);\n      }\n    }\n  }\n\n  renderEmpty() {\n    return (<div></div>); \n  }\n\n  renderDataframe(dataframe: DataFrame) {\n    const { title, classes } = this.props;\n    const { columns } = this.state;\n    return (\n      <div className=\"ag-theme-fresh\" style={{ height: '95%', width: '100%' }}>\n        <Typography className={ classes.title }>{ title }</Typography>\n        <AgGridReact\n          defaultColDef={{\n            resizable: true,\n            filter: true,\n            sortable: true,\n          }}\n          rowSelection={'single'}\n          rowData={dataframe.rows}\n          applyColumnDefOrder={true}\n          onGridReady={ this.onGridReady }\n          onFirstDataRendered={ this.onGridDataUpdated }\n          onRowDataUpdated={ this.onGridDataUpdated }\n          onRowDataChanged={ this.onGridDataUpdated }\n          onRowSelected={ this.onRowSelected }\n          >\n          {columns}  \n        </AgGridReact>\n      </div>\n    );\n  }\n\n  render() {\n    const { dataframe } = this.props;\n\n    if (dataframe === undefined) {\n      return this.renderEmpty();\n    } else {\n      return this.renderDataframe(dataframe);\n    }\n  }\n}\n\nexport default withStyles(styles)(DataframeComponent);\n","\nimport React, { Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport { RadialChart, makeVisFlexible } from 'react-vis';\n\nimport DataFrame from '../models/dataframe';\n\n\nconst FlexRadial = makeVisFlexible(RadialChart);\nconst styles = (theme: Theme) => ({\n});\n\ninterface GroupChartProps {\n  classes: any,\n  group_rebals: DataFrame | undefined,\n}\n\ninterface GroupChartState {}\n\nclass GroupChartComponent extends Component<GroupChartProps, GroupChartState> {\n  constructor(props: GroupChartProps) {\n    super(props);\n  }\n\n  renderEmpty() {\n    return (<div></div>);\n  }\n\n  renderBuySell(groupRebals: DataFrame) {\n    let buyCount = 0;\n    let sellCount = 0;\n    for (const row of groupRebals.rows) {\n      if (row.quantity < 0) {\n        sellCount += 1;\n      } else {\n        buyCount += 1;\n      }\n    }\n\n    return (\n      <FlexRadial\n        data={[\n          { angle: (buyCount / (buyCount + sellCount)) * 360.0, label: 'Buys', color: 'green' },\n          { angle: (sellCount / (buyCount + sellCount)) * 360.0, label: 'Sells', color: 'red' },\n        ]}\n        showLabels={ true }\n      />  \n    );\n  }\n\n  renderBuySellNotional(groupRebals: DataFrame) {\n    let buyNotl = 0;\n    let sellNotl = 0;\n    for (const row of groupRebals.rows) {\n      if (row.quantity < 0) {\n        sellNotl += Math.abs(row['notional_usd']);\n      } else {\n        buyNotl += row['notional_usd'];\n      }\n    }\n\n    return (\n      <FlexRadial\n        data={[\n          { angle: (buyNotl / (buyNotl + sellNotl)) * 360.0, label: 'Buys (USD)', color: 'green' },\n          { angle: (sellNotl / (buyNotl + sellNotl)) * 360.0, label: 'Sells (USD)', color: 'red' },\n        ]}\n        showLabels={ true }\n      />\n    );\n  }\n\n  renderIndustry(groupRebals: DataFrame, buySell: string) {\n    let industries = new Map<string, number>();\n    for (const row of groupRebals.rows) {\n      const industry = row['industry'];\n      let curr = industries.get(industry);\n      if (curr === undefined) {\n        curr = 0;\n      }\n\n      if (buySell === 'buys' && row['quantity'] > 0) {\n        curr += row['notional_usd'];\n      } else if (buySell == 'sells' && row['quantity'] < 0) {\n        curr += Math.abs(row['notional_usd']);\n      }\n\n      industries.set(industry, curr);\n    }\n\n    let total = 0;\n    for (const value of Array.from(industries.values())) {\n      total = total + value;\n    }\n\n    let data: any[] = [];\n    industries.forEach((value, key) => {\n      data.push({\n        angle: (value / total) * 360.0,\n        label: key,\n      });\n    });\n\n    return (\n      <FlexRadial data={ data } showLabels={ true } />\n    );\n  }\n\n  renderCharts(groupRebals: DataFrame) {\n    return (\n      <Grid container direction='row'>\n        <Grid container item>\n          { this.renderBuySell(groupRebals) }\n        </Grid>\n        <Grid container item>\n          { this.renderBuySellNotional(groupRebals) }\n        </Grid>\n        <Grid container item>\n          { this.renderIndustry(groupRebals, 'buys') }\n        </Grid>\n      </Grid>\n    );\n  }\n\n  render() {\n    const { group_rebals } = this.props;\n    if (group_rebals === undefined) {\n      return this.renderEmpty();\n    } else {\n      return this.renderCharts(group_rebals);\n    }\n  }\n}\n\nexport default withStyles(styles)(GroupChartComponent);\n","\nimport React, {Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\n\nimport Values from '../models/values';\n\n\nconst styles = (theme: Theme) => ({\n  root: {\n    flexGrow: 1,\n    height: '100%',\n  },\n});\n\ninterface GrsProps {\n  classes: any,\n  values: Values,\n}\n\ninterface GrsState {}\n\n\nclass GroupRebalStatsComponent extends Component<GrsProps, GrsState> {\n  constructor(props: GrsProps) {\n    super(props);\n  }\n\n  renderEmpty() {\n    const { classes } = this.props;\n    return (<div className={ classes.root }></div>);\n  }\n\n  renderValues(values: Values) {\n    const { classes } = this.props;\n    const fields = [\n      'portfolios',\n      'full_rebals',\n      'data_duration',\n      'rebal_duration',\n    ];\n\n    let rows = [];\n    for (const field of fields) {\n      const value = values[field];\n      if (value === null || value === undefined) {\n        continue;\n      }\n      rows.push(\n        <TableRow key={field}>\n          <TableCell>{field}</TableCell>\n          <TableCell>{value}</TableCell>\n        </TableRow>\n      );\n    }\n\n    return (\n      <div className={ classes }>\n        <Table>\n          <TableBody>{ rows }</TableBody>\n        </Table>\n      </div>\n    )\n  }\n\n  render() {\n    const { values } = this.props;\n    if (values === undefined) {\n      return this.renderEmpty();\n    } else {\n      return this.renderValues(values);\n    }\n  }\n}\n\nexport default withStyles(styles)(GroupRebalStatsComponent);\n","\nimport React, { Component } from 'react';\nimport { Theme, withStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\n\nimport DataframeComponent from './dataframe.component';\nimport ExplorerService from '../service/explorer.service';\nimport GroupChartsComponent from './group_charts.component';\nimport GroupRebalStatsComponent from './group_rebal_stats.component';\nimport HeaderComponent from './header.component';\nimport InputsComponent from './inputs.component';\nimport LogsComponent from './logs.component';\nimport DataFrame from '../models/dataframe';\nimport Values from '../models/values';\n\nimport { yyyymmdd, from_yyyymmdd } from '../utils/dates';\nimport GroupRebalRequest from '../models/request_models';\nimport GroupRebalPortfoliosResponse from '../models/response_models';\n\n\nconst styles = (theme: Theme) => ({\n  root: {\n    flexGrow: 1,\n    height: '100%',\n  },\n  grow: {\n    flexGrow: 1,\n  },\n});\n\ninterface PortfolioGroupProps {\n  classes: any,\n  match: any,\n}\n\ninterface PortfolioGroupState {\n  explorer: ExplorerService | undefined,\n  groupId: string | undefined,\n  rebal_dates: Date[] | undefined,\n  rebal_date: Date | undefined,\n\n  // group rebal data\n  group_rebal_portfolios: DataFrame | undefined,\n  group_rebal_states: Values | undefined,\n  group_rebals: DataFrame | undefined,\n  group_security_orders: DataFrame | undefined,\n\n  // single rebal data\n  rebal_securities: DataFrame | undefined,\n  rebal_positions: DataFrame | undefined,\n  rebal_weights: DataFrame | undefined,\n  rebal_orders: DataFrame | undefined,\n  rebal_logs: DataFrame | undefined,\n\n  selected_portfolio: any,\n}\n\nclass PortfolioGroupComponent extends Component<PortfolioGroupProps, PortfolioGroupState> {\n  constructor(props: PortfolioGroupProps) {\n    super(props);\n\n    this.onConnect = this.onConnect.bind(this);\n    this.onSelectRebalDate = this.onSelectRebalDate.bind(this);\n    this.onSelectPortfolioRebal = this.onSelectPortfolioRebal.bind(this);\n    this.onSecuritySelected = this.onSecuritySelected.bind(this);\n    this.onOrderSelected = this.onOrderSelected.bind(this);\n    this.onRebalSecuritySelected = this.onRebalSecuritySelected.bind(this);\n    this.getGroupPortfolios = this.getGroupPortfolios.bind(this);\n\n    this.state = {\n      explorer: new ExplorerService(this.onConnect),\n      groupId: undefined,\n      rebal_dates: undefined,\n      rebal_date: undefined,\n\n      group_rebal_portfolios: undefined,\n      group_rebal_states: undefined,\n      group_rebals: undefined,\n      group_security_orders: undefined,\n\n      rebal_securities: undefined,\n      rebal_positions: undefined,\n      rebal_weights: undefined,\n      rebal_orders: undefined,\n      rebal_logs: undefined,\n\n      selected_portfolio: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const groupId = this.props.match.params.groupId\n    this.setState(() => ({groupId: groupId}));\n    this.onConnect(groupId);\n  }\n\n  onConnect(groupId: string) {\n    // load valid dates for group\n    const explorer = this.state.explorer!!;\n    explorer.groupRebalDatesRest(groupId!)\n      .subscribe({\n        next: (values: Values) => {\n          console.log(values);\n          const rebal_dates = values['rebal_dates'].map((dt_str: string) => from_yyyymmdd(dt_str));\n          this.setState(() => ({'rebal_dates': rebal_dates}));\n\n          // if there is only a single date automatically select it\n          if (rebal_dates.length === 1) {\n            console.log('Auto-selecting date: ' + rebal_dates[0]);\n            this.onSelectRebalDate(rebal_dates[0]);\n          }\n        },\n\n        error: (error: any) => console.log(error),\n      });\n  }\n\n  /**\n   * @description CALLING groupRebalStats using rest_explorer which will return Observable\n   * Subscribing the returned Observable in order to use the data\n   */\n  onSelectRebalDate(dataDate: Date) {\n    const { groupId } = this.state;\n    const explorer = this.state.explorer!!;\n    this.setState(() => ({rebal_date: dataDate}));\n   \n    explorer.groupRebalStatsRest(groupId!, dataDate)\n      .subscribe({\n        next: (values: Values) => this.setState(() => ({ group_rebal_states: values })),\n        error: (error: any) => console.log(error),\n      });\n\n    // get list of portfolios for group and rebal date\n    this.getGroupPortfolios(groupId as string, dataDate);\n\n    // simulate nothing selected\n    this.onSelectPortfolioRebal(undefined);\n  }\n\n  getGroupPortfolios(groupId: string, dataDate: Date) {\n    const groupRebalRequest: GroupRebalRequest = {\n      portfolioGroupId: groupId as string,\n      dataDate: yyyymmdd(dataDate),\n    };\n\n    const explorer = this.state.explorer!!;\n    explorer.groupRebalPortfoliosRest(groupRebalRequest)\n      .subscribe({\n        next: (response: GroupRebalPortfoliosResponse) => {\n          this.setState(() => ({ group_rebal_portfolios: response }));\n        },\n        error: (error: any) => console.log(error),\n      });\n  }\n\n  onSelectPortfolioRebal(portfolioRebal: any) {\n    console.log('onSelectPortfolioRebal');\n    console.log(portfolioRebal);\n\n    this.setState(() => ({ selected_portfolio: portfolioRebal }));\n    if (portfolioRebal === undefined) {\n      this.loadGroupRebalData();\n    } else {\n      const { groupId } = this.state;\n      const { rebal_id } = portfolioRebal;\n      this.loadSingleRebalData(groupId!, rebal_id);\n    }\n  }\n\n  onSecuritySelected(security: any) {\n    if (security === undefined) {\n      this.setState(() => ({ group_security_orders: undefined }));\n      return;\n    }\n\n    const { sms_id } = security;\n    const { groupId, rebal_date } = this.state;\n    this.state.explorer?.groupSecurityOrdersRest(groupId!, sms_id, rebal_date!)\n      .subscribe({\n        next: (df: DataFrame) => this.setState(() => ({ group_security_orders: df })),\n        error: (error: any) => console.log(error),\n      });\n  }\n\n  onOrderSelected(order: any) {\n    // todo impl\n  }\n\n  onRebalSecuritySelected(rebal_security: any) {\n    // todd impl\n  }\n\n  loadSingleRebalData(groupId: string, rebalId: string) {\n    const explorer = this.state.explorer!!;\n\n    explorer.rebalSecuritiesRest(groupId, rebalId)\n      .subscribe({\n        next: (df: DataFrame) => this.setState(() => ({ rebal_securities: df })),\n        error: (error: any) => console.log(error),\n      });\n\n    explorer.rebalPositionsRest(groupId, rebalId)\n      .subscribe({\n        next: (df: DataFrame) => this.setState(() => ({ rebal_positions: df })),\n        error: (error: any) => console.log(error),\n      });\n\n    explorer.rebalWeightsRest(groupId, rebalId)\n      .subscribe({\n        next: (df: DataFrame) => this.setState(() => ({ rebal_weights: df })),\n        error: (error: any) => console.log(error),\n      });\n\n    explorer.rebalOrdersRest(groupId, rebalId)\n      .subscribe({\n        next: (df: DataFrame) => this.setState(() => ({ rebal_orders: df })),\n        error: (error: any) => console.log(error),\n      });\n\n    explorer.rebalLogsRest(groupId, rebalId, undefined)\n      .subscribe({\n        next: (df: DataFrame) => this.setState(() => ({ rebal_logs: df })),\n        error: (error: any) => console.log(error),\n      });\n  }\n\n  loadGroupRebalData() {\n    const { groupId, rebal_date } = this.state;\n    this.state.explorer?.groupRebalsRest(groupId!, rebal_date!)\n      .subscribe({\n        next: (df: DataFrame) => this.setState(() => ({ group_rebals: df })),\n        error: (error: any) => console.log(error),\n      });\n  }\n\n  renderPortfolio() {\n    const { rebal_securities, rebal_positions, rebal_weights, rebal_orders, rebal_logs } = this.state;\n    return (\n      <Grid container direction='column'>\n        <Grid item spacing={1} style={{ height: '100%', width: '50%' }}>\n          <InputsComponent\n            securities={rebal_securities}\n            positions={rebal_positions}\n            rebal_weights={rebal_weights}\n            rebal_orders={rebal_orders}\n            onSecuritySelected={this.onSecuritySelected}\n          />\n        </Grid>\n        <Grid item spacing={1} style={{ height: '100%', width: '50%' }}>\n          <LogsComponent rebal_logs={rebal_logs} />\n        </Grid>\n      </Grid>\n    );\n  }\n\n  renderGroup() {\n    const { group_rebals, group_security_orders } = this.state;\n    return (\n      <Grid container direction='column' style={{ height: '100%' }}>\n        <Grid container direction='row' style={{ width: '80%', height: '100%' }} >\n          <Grid container item style={{ height: '50%' }}>\n            <DataframeComponent\n              title='Rebalances'\n              dataframe={ group_rebals! }\n              onSelect={ this.onSecuritySelected }\n            />\n          </Grid>\n          <Grid container item style={{ height: '50%' }}>\n            <DataframeComponent\n              title='Orders'\n              dataframe={ group_security_orders! }\n              onSelect={ this.onOrderSelected }\n            />\n          </Grid>\n        </Grid>\n\n        <Grid container direction='row' style={{ width: '20%', height: '100%' }} >\n          <GroupChartsComponent group_rebals={ group_rebals } />\n        </Grid>\n      </Grid>\n    );\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { group_rebal_portfolios, group_rebal_states, selected_portfolio } = this.state;\n\n    // determines if we show group level summary or individual portfolio level details\n    let item = undefined;\n    if (selected_portfolio === undefined) {\n      item = this.renderGroup();\n    } else {\n      item = this.renderPortfolio();\n    }\n\n    return (\n      <div className={ classes.root }>\n        <HeaderComponent title='Rebal POC'/>\n\n        <Grid container className={classes.root} direction='column' spacing={0}>\n          <Grid container direction='row' style={{ width: '30%', height: '100%' }} >\n            <Grid container item style={{ height: '50%' }}>\n              <GroupRebalStatsComponent values={ group_rebal_states! } />\n            </Grid>\n            <Grid container direction='row' style={{ height: '50%' }}>\n              <DataframeComponent\n                title='Portfolios'\n                dataframe={ group_rebal_portfolios! }\n                onSelect={ this.onSelectPortfolioRebal } \n              /> \n            </Grid>\n          </Grid>\n          <Grid container direction='row' style={{ width: '70%', height: '100%' }} >\n            { item }\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(PortfolioGroupComponent);\n","import React, {useState} from 'react';\n\n/**\n * @param filter, setFilter\n * @returns Input Field\n */\nexport function GlobalFilter({filter, setFilter}: { filter: any, setFilter: any }) {\n  const [value, setValue] = useState(filter)\n  return (\n    <span>\n      <input\n        className='searchinput'\n        value={value || ''}\n        onChange={_this => {\n          setValue(_this.target.value);\n          setFilter(_this.target.value || \"\") // if value doesn't come then \"\"\n        }}\n        placeholder={'Search'}\n      />\n    </span>\n  )\n}","import React, {useEffect} from \"react\";\nimport {useRowSelect, useTable, useGlobalFilter, useExpanded, useGroupBy,} from 'react-table';\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome';\nimport {faAngleRight, faAngleDown} from '@fortawesome/free-solid-svg-icons';\nimport {GlobalFilter} from './react_table_action.component'\nimport './react_table.scss';\n\n\nexport interface ReactTableState {\n  columns: any | undefined,\n  data: any[],\n  groupByColumns: string[];\n}\n\n/**\n * @param props ReactTableState\n * @returns react table grid\n */\nfunction ReactTable(props: ReactTableState) {\n  const data = props.data;\n  const columns = props.columns;\n  useEffect(() => {\n    if (props.groupByColumns && props.groupByColumns.length) {\n      setGroupBy(props.groupByColumns);\n    }\n  }, []);\n  const tableInstance = useTable<any>(\n    {columns, data},\n    useGlobalFilter, // used for searching with globalFilter and setGlobalFilter\n    useGroupBy, // this should be used along with useExpanded\n    useExpanded,\n    useRowSelect,\n    // Use table's getToggleAllRowsSelectedProps method  to render a checkbox at first column\n    hooks => {\n      hooks.visibleColumns.push(columns => [\n        {\n          id: 'selection',\n\n          Header: ({getToggleAllRowsSelectedProps}: any) => (\n            <div>\n              <IndeterminateCheckbox {...getToggleAllRowsSelectedProps()} />\n            </div>\n          ),\n          Cell: ({row}: any) => (\n            <div>\n              <IndeterminateCheckbox {...row.getToggleRowSelectedProps()} />\n            </div>\n          ),\n        },\n        ...columns,\n      ])\n    })\n\n\n  /**\n   * Add checkbox as first column to the react table\n   */\n  const IndeterminateCheckbox = React.forwardRef(\n    ({indeterminate, ...rest}: any, ref) => {\n      const defaultRef = React.useRef()\n      const resolvedRef: any = ref || defaultRef\n\n      React.useEffect(() => {\n        resolvedRef.current.indeterminate = indeterminate\n      }, [resolvedRef, indeterminate])\n\n      return (\n          <input type=\"checkbox\" ref={resolvedRef} {...rest} />\n      )\n    }\n  )\n\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    setGroupBy,\n    prepareRow,\n    state: {groupBy, expanded, globalFilter},\n    setGlobalFilter,\n  }: any = tableInstance\n\n  return (\n    <div>\n      <GlobalFilter filter={globalFilter} setFilter={setGlobalFilter}/>\n      <table {...getTableProps()} className='reactTable'>\n        <thead>\n        {headerGroups.map((headerGroup: any) => (\n          <tr {...headerGroup.getHeaderGroupProps()}>\n            {headerGroup.headers.map((column: any) => (\n              <th {...column.getHeaderProps()}>\n                {column.render('Header')}\n              </th>\n            ))}\n          </tr>\n        ))}\n        </thead>\n        <tbody {...getTableBodyProps()}>\n        {// Loop over the table rows\n          rows.map((row: any) => {\n            // Prepare the row for display\n            prepareRow(row)\n            return (\n              // Apply the row props\n              <tr {...row.getRowProps()}>\n                {// Loop over the rows cells\n                  row.cells.map((cell: any) => {\n                    // Apply the cell props\n                    return (\n                      <td {...cell.getCellProps()}>\n                        {\n                          cell.isGrouped ? (\n                            // If it's a grouped cell, add an expander and row count\n                            <>\n                              {/* TODO check the getToggleRowExpandedProps for null */}\n                              <span {...row.getToggleRowExpandedProps()}>\n                                                                    {row.isExpanded ?\n                                                                      <FontAwesomeIcon icon={faAngleDown}/> :\n                                                                      <FontAwesomeIcon icon={faAngleRight}/>}\n                                                                </span>{' '}\n                              <span className='fontWeightBold'>{cell.render('Cell')} ({row.subRows.length})</span>\n                            </>\n                          ) : cell.isAggregated ? (\n                            // If the cell is aggregated, use the Aggregated\n                            // renderer for cell\n                            <span className='fontWeightBold'>{cell.render('Aggregated')}</span>\n                          ) : cell.isPlaceholder ? null : ( // For cells with repeated values, render null\n                            // Otherwise, just render the regular cell\n                            cell.render('Cell')\n                          )\n                        }\n                      </td>\n                    )\n                  })}\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\n\nexport default ReactTable;\n\n\n","import React from 'react';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nconst styles = () => ({\n    root: {\n        alignItems: \"center\",\n        display: \"flex\", \n        justifyContent: \"center\", \n        height: \"100vh\", \n        width: \"100vw\"\n    }\n});\n\ninterface PropTypes{\n    // TODO - need to remove any and undefined from Interface\n    classes : any\n}\n\nfunction Spinner(props :PropTypes){\n    const { classes } = props;\n    return(\n        <div className={classes.root}>\n            <CircularProgress /> \n        </div>\n    )\n}\n\nexport default withStyles(styles)(Spinner);","import React, { Component } from \"react\";\n\nimport ExplorerService from \"../service/explorer.service\";\nimport ReactTable from \"./react_table_components/react_table.component\";\nimport HeaderComponent from './header.component';\nimport { Column } from \"react-table\";\nimport GroupRebalRequest from \"../models/request_models\";\nimport GroupRebalPortfoliosResponse from \"../models/response_models\";\nimport { yyyymmdd } from \"../utils/dates\";\nimport Spinner from \"../utils/Spinner\";\n\n\ninterface PortfolioListState {\n    explorer: ExplorerService | undefined;\n    columnData: any;\n    rows: any[];\n    groupId?: Number;\n}\n/**\n * @description This class renders portfolio list with hardcoded request data\n * TODO update request data dynamically\n */\nclass PortfolioList extends Component<any, PortfolioListState>{\n    showLoader = false;\n    constructor(props: any) {\n        super(props);\n        this.state = {\n            explorer: undefined,\n            columnData: undefined,\n            rows: []\n        }\n        this.onConnection = this.onConnection.bind(this);\n    }\n\n    onConnection() {\n        this.getPortfolioData();\n    }\n\n    componentWillMount() {\n        this.showLoader = true;\n        if (this.state.explorer === undefined) {\n            const explorerSrvc = new ExplorerService(this.onConnection);\n            this.setState({ explorer: explorerSrvc });\n        }\n    }\n    componentDidMount() {\n        this.setState({ groupId: this.props.match.params.groupId });\n    }\n\n    getPortfolioData() {\n        const groupRebalRequest: GroupRebalRequest = {\n            portfolioGroupId: this.state.groupId?.toString() as string,\n            dataDate: yyyymmdd(new Date('Mon Sep 20 2021 00:00:00'))\n        }\n        // TODO: Hardcoded request just to create a example component for react table\n        this.state.explorer?.groupRebalPortfoliosRest(groupRebalRequest).subscribe({\n            next: (response: GroupRebalPortfoliosResponse) => {\n                const columns: Column[] = [];\n                response?.columns.forEach((col: any) => {\n                    const column: any = {\n                        Header: col.header_name,\n                        accessor: col.field,\n                        Cell: (rowInfo: any) => {\n                            return (\n                                // TODO - if in case value is coming -ve then to change\n                                <span className={Number(rowInfo?.value) >= 0 ? \"alignRight\" : \"\"}>\n                                    {rowInfo?.value}\n                                </span>\n                            )\n                        }\n                    };\n                    columns.push(column);\n                })\n                this.setState({ columnData: columns, rows: response.rows });\n                this.showLoader = false;\n            },\n            error: (error: any) => {\n                this.showLoader = false;\n                // TODO handle errors with error message notification/popup\n                console.log(error)\n            }\n        });\n    }\n\n    render() {\n        const { columnData, rows } = this.state;\n        return (\n            this.showLoader && !columnData ?\n                <Spinner />\n                :\n                <div>\n                    <HeaderComponent title='Portfolios' />\n                    <ReactTable\n                        columns={columnData}\n                        data={rows}\n                        groupByColumns={['portfolio_group_id', 'portfolio_id']}\n                    />\n                </div>\n        )\n    }\n}\n\nexport default PortfolioList;","import React, {Component} from 'react';\nimport {Theme, withStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport TextField from '@material-ui/core/TextField';\nimport { AgGridColumn, AgGridReact } from '@ag-grid-community/react';\n\nimport HeaderComponent from '../components/header.component';\n\nconst styles = (theme: Theme) => ({\n  root: {\n    flexGrow: 1,\n    height: '100%',\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  content: {\n    padding: 5,\n    height: '100%',\n  },\n});\n\ninterface TypeaheadProps {\n  classes: any,\n  match: any,\n}\n\ninterface TypeaheadState {\n  gridApi: any,\n  firmId: string,\n  search_string: string,\n  search_results: any,\n  options: any,\n  loading: boolean,\n  columns: any,\n}\n\nclass TypeaheadComponent extends Component<TypeaheadProps, TypeaheadState> {\n  constructor(props: TypeaheadProps) {\n    super(props);\n\n    this.onGridReady = this.onGridReady.bind(this);\n    this.onGridDataUpdated = this.onGridDataUpdated.bind(this);\n    this.onSearch = this.onSearch.bind(this);\n    this.highlight = this.highlight.bind(this);\n\n    this.state = {\n      gridApi: undefined,\n      firmId: '14',\n      search_string: '',\n      search_results: [],\n      options: {\n        filter: (x: any) => x,\n      },\n      loading: false,\n      columns: [\n        <AgGridColumn headerName='score' field='score' />,\n        <AgGridColumn headerName='entity_id' field='entity_id' />,\n        <AgGridColumn headerName='display_name' field='display_name' minWidth={400} cellRenderer={ this.highlight } />,\n        <AgGridColumn headerName='type' field='type' />,\n        <AgGridColumn headerName='issuer_id' field='issuer_id' />,\n        <AgGridColumn headerName='ownership_type' field='ownership_type' />,\n        <AgGridColumn headerName='currency' field='currency' />,\n        <AgGridColumn headerName='symbol' field='symbol' cellRenderer={ this.highlight } />,\n        <AgGridColumn headerName='account_number' field='account_number' />,\n      ],\n    };\n  }\n\n  componentDidMount() {\n    console.log('Starting search for: ' + this.props.match.params.firmId);\n    this.setState({ firmId: this.props.match.params.firmId });\n  }\n\n  onGridReady(params: any) {\n    this.setState({ gridApi: params.columnApi });\n  }\n\n  onGridDataUpdated(params: any) {\n    params.api.sizeColumnsToFit();\n  }\n\n  highlight(params: any) {\n    const { search_string } = this.state;\n    let value = params.data.display_name;\n    let index = value.toLowerCase().indexOf(search_string);\n    return value.substr(0, index) + '<strong>' + value.substr(index, search_string.length) +\n      '</strong>' + value.substring(index + search_string.length);\n  }\n\n  onSearch(event: any) {\n    const value = event.target.value;\n    if (value === undefined || value === null || value === '') {\n      return;\n    }\n\n    if (value.length < 3) {\n      return;\n    }\n\n    this.setState({search_string: value, loading: true});\n    const { firmId } = this.state;\n    const url = 'http://localhost:8888/entities?firm_id=' + firmId + '&search=' + value;\n    console.log(url);\n    fetch(url)\n      .then(resp => resp.json())\n      .then(json_res => {\n        console.log(json_res);\n        this.setState({search_results: json_res.results});\n      })\n      .catch(error => {\n        console.log(error);\n        this.setState({search_results: []});\n      })\n      .finally(() => {\n        this.setState({loading: false});\n      })\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { search_results, loading, columns } = this.state;\n\n    return (\n      <div className={classes.root}>\n        <HeaderComponent title='Search Entities' />\n\n        <Grid container className={classes.content} direction='row' spacing={0}>\n          <Grid item style={{ height: '50px', width: '100%' }}>\n            <TextField\n              style={{ width: 500 }}\n              label=\"Search Entities\"\n              variant=\"outlined\"\n              onChange={ this.onSearch }\n              InputProps={{\n                endAdornment: (\n                  <React.Fragment>\n                    { loading ? ( <CircularProgress color='inherit' size={20} /> ) : null }\n                  </React.Fragment>\n                )\n              }}\n            />\n          </Grid>\n          <Grid item style={{ height: '60%', width: '100%' }}>\n            <div className=\"ag-theme-fresh\" style={{ height: '100%', width: '100%' }}>\n              <AgGridReact\n                defaultColDef={{\n                  resizable: true,\n                  filter: true,\n                  sortable: true,\n                }}\n                rowSelection={'single'}\n                rowData={search_results}\n                applyColumnDefOrder={true}\n                onGridReady={ this.onGridReady }\n                onFirstDataRendered={ this.onGridDataUpdated }\n              >\n                {columns}\n              </AgGridReact>\n            </div>\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(TypeaheadComponent);\n","\nimport React from 'react';\nimport { ModuleRegistry } from '@ag-grid-community/core';\nimport { ClientSideRowModelModule } from '@ag-grid-community/client-side-row-model';\n\nimport { BrowserRouter as Router, Route } from 'react-router-dom'\n\nimport '@ag-grid-community/core/dist/styles/ag-grid.css';\nimport '@ag-grid-community/core/dist/styles/ag-theme-alpine.css';\nimport '@ag-grid-community/core/dist/styles/ag-theme-material.css';\nimport '@ag-grid-community/core/dist/styles/ag-theme-fresh.css';\n\nimport './App.css';\nimport './stylesheets/_main.scss' ;\nimport MainComponent from './components/main.component';\nimport PortfolioGroupComponent from './components/portfolio_group.component';\nimport PortfolioList from './components/portfolio_list.component';\nimport TypeAheadComponent from './views/typeahead.component';\n\n\nModuleRegistry.registerModules([\n  ClientSideRowModelModule,\n]);\n\nfunction App() {\n  return (\n    <Router>\n      <div style={{ height: '100%' }}>\n          <Route path='/rebal/:groupId/:rebalId' component={ MainComponent } />\n          <Route path='/group/:groupId' component={ PortfolioGroupComponent } />\n          <Route path='/portfolioList/:groupId' component={ PortfolioList } />\n          <Route path='/search/:firmId' component={ TypeAheadComponent } />\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.0/8 are considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n  );\n  \n  type Config = {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\n  };\n  \n  export function register(config?: Config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n      // The URL constructor is available in all browsers that support SW.\n      const publicUrl = new URL(\n        process.env.PUBLIC_URL,\n        window.location.href\n      );\n      if (publicUrl.origin !== window.location.origin) {\n        // Our service worker won't work if PUBLIC_URL is on a different origin\n        // from what our page is served on. This might happen if a CDN is used to\n        // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n        return;\n      }\n  \n      window.addEventListener('load', () => {\n        const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n  \n        if (isLocalhost) {\n          // This is running on localhost. Let's check if a service worker still exists or not.\n          checkValidServiceWorker(swUrl, config);\n  \n          // Add some additional logging to localhost, pointing developers to the\n          // service worker/PWA documentation.\n          navigator.serviceWorker.ready.then(() => {\n            console.log(\n              'This web app is being served cache-first by a service ' +\n                'worker. To learn more, visit https://bit.ly/CRA-PWA'\n            );\n          });\n        } else {\n          // Is not localhost. Just register service worker\n          registerValidSW(swUrl, config);\n        }\n      });\n    }\n  }\n  \n  function registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n      .register(swUrl)\n      .then(registration => {\n        registration.onupdatefound = () => {\n          const installingWorker = registration.installing;\n          if (installingWorker == null) {\n            return;\n          }\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the updated precached content has been fetched,\n                // but the previous service worker will still serve the older\n                // content until all client tabs are closed.\n                console.log(\n                  'New content is available and will be used when all ' +\n                    'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                );\n  \n                // Execute callback\n                if (config && config.onUpdate) {\n                  config.onUpdate(registration);\n                }\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // \"Content is cached for offline use.\" message.\n                console.log('Content is cached for offline use.');\n  \n                // Execute callback\n                if (config && config.onSuccess) {\n                  config.onSuccess(registration);\n                }\n              }\n            }\n          };\n        };\n      })\n      .catch(error => {\n        console.error('Error during service worker registration:', error);\n      });\n  }\n  \n  function checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n      headers: { 'Service-Worker': 'script' }\n    })\n      .then(response => {\n        // Ensure service worker exists, and that we really are getting a JS file.\n        const contentType = response.headers.get('content-type');\n        if (\n          response.status === 404 ||\n          (contentType != null && contentType.indexOf('javascript') === -1)\n        ) {\n          // No service worker found. Probably a different app. Reload the page.\n          navigator.serviceWorker.ready.then(registration => {\n            registration.unregister().then(() => {\n              window.location.reload();\n            });\n          });\n        } else {\n          // Service worker found. Proceed as normal.\n          registerValidSW(swUrl, config);\n        }\n      })\n      .catch(() => {\n        console.log(\n          'No internet connection found. App is running in offline mode.'\n        );\n      });\n  }\n  \n  export function unregister() {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.ready\n        .then(registration => {\n          registration.unregister();\n        })\n        .catch(error => {\n          console.error(error.message);\n        });\n    }\n  }\n  ","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}